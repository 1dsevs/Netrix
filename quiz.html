<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quiz Arena | EduSyncHub</title>
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Montserrat:wght@800&display=swap" rel="stylesheet">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- Animate.css -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
  <style>
    :root {
      --primary: #6C63FF;
      --secondary: #4D44DB;
      --accent: #FF6584;
      --dark: #2D3748;
      --light: #F7FAFC;
      --success: #4CAF50;
      --danger: #F44336;
      --warning: #FFC107;
      --info: #2196F3;
      --math: #4CAF50;
      --science: #2196F3;
      --ict: #9C27B0;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Poppins', sans-serif;
    }
    
    body {
      background-color: #f5f7fa;
      color: var(--dark);
      min-height: 100vh;
    }
    
    /* Header */
    .header {
      background: white;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      padding: 15px 0;
      position: sticky;
      top: 0;
      z-index: 100;
    }
    
    .header-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .logo {
      display: flex;
      align-items: center;
      gap: 10px;
      text-decoration: none;
    }
    
    .logo-icon {
      width: 40px;
      height: 40px;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 1.2rem;
    }
    
    .logo-text {
      font-family: 'Montserrat', sans-serif;
      font-weight: 800;
      font-size: 1.5rem;
      background: linear-gradient(45deg, var(--primary), var(--accent));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }
    
    .nav-links {
      display: flex;
      gap: 20px;
    }
    
    .nav-link {
      text-decoration: none;
      color: var(--dark);
      font-weight: 600;
      transition: color 0.3s;
      display: flex;
      align-items: center;
      gap: 5px;
    }
    
    .nav-link:hover {
      color: var(--primary);
    }
    
    .nav-link i {
      font-size: 0.9rem;
    }
    
    /* Main Container */
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 30px 20px;
    }
    
    /* RP Dashboard */
    .rp-dashboard {
      background: white;
      border-radius: 16px;
      padding: 20px;
      margin-bottom: 30px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.05);
      display: flex;
      justify-content: space-between;
      align-items: center;
      animation: fadeInDown 0.5s;
    }
    
    .rp-info {
      display: flex;
      align-items: center;
      gap: 15px;
    }
    
    .rp-icon {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      width: 50px;
      height: 50px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 1.5rem;
    }
    
    .rp-amount {
      font-size: 1.8rem;
      font-weight: 700;
      color: var(--primary);
    }
    
    .rp-label {
      font-size: 0.9rem;
      opacity: 0.7;
    }
    
    .rp-progress {
      flex-grow: 1;
      max-width: 300px;
    }
    
    .progress-bar {
      height: 10px;
      background: #e0e0e0;
      border-radius: 5px;
      overflow: hidden;
      margin-bottom: 5px;
    }
    
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--primary), var(--accent));
      width: 0%;
      transition: width 0.5s ease;
    }
    
    .progress-text {
      text-align: right;
      font-size: 0.8rem;
      color: var(--dark);
      opacity: 0.7;
    }
    
    /* Quiz Container */
    .quiz-container {
      background: white;
      border-radius: 16px;
      padding: 30px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.05);
      animation: fadeIn 0.5s;
    }
    
    .quiz-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 1px solid #eee;
    }
    
    .quiz-category {
      display: inline-block;
      padding: 5px 15px;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 600;
      color: white;
    }
    
    .category-math {
      background-color: var(--math);
    }
    
    .category-science {
      background-color: var(--science);
    }
    
    .category-ict {
      background-color: var(--ict);
    }
    
    .quiz-difficulty {
      font-size: 0.9rem;
      opacity: 0.7;
    }
    
    .quiz-rp {
      font-weight: 700;
      color: var(--accent);
    }
    
    .quiz-question {
      font-size: 1.3rem;
      margin-bottom: 25px;
      line-height: 1.5;
    }
    
    .quiz-image {
      max-width: 100%;
      height: auto;
      border-radius: 8px;
      margin: 15px 0;
      display: block;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
    
    .options-container {
      display: grid;
      grid-template-columns: 1fr;
      gap: 12px;
      margin-bottom: 30px;
    }
    
    .option-btn {
      padding: 15px;
      border-radius: 8px;
      border: 2px solid #eee;
      background: white;
      text-align: left;
      cursor: pointer;
      transition: all 0.2s;
      font-size: 1rem;
      position: relative;
      overflow: hidden;
    }
    
    .option-btn:hover {
      border-color: var(--primary);
      transform: translateY(-2px);
      box-shadow: 0 5px 10px rgba(108, 99, 255, 0.1);
    }
    
    .option-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 5px;
      height: 100%;
      background: var(--primary);
      transition: width 0.3s;
    }
    
    .option-btn:hover::before {
      width: 100%;
      opacity: 0.1;
    }
    
    .option-btn.correct {
      background-color: rgba(76, 175, 80, 0.1);
      border-color: var(--success);
      color: var(--success);
    }
    
    .option-btn.incorrect {
      background-color: rgba(244, 67, 54, 0.1);
      border-color: var(--danger);
      color: var(--danger);
    }
    
    .option-btn.disabled {
      pointer-events: none;
      opacity: 0.7;
    }
    
    .quiz-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 30px;
      padding-top: 20px;
      border-top: 1px solid #eee;
    }
    
    .question-counter {
      font-size: 0.9rem;
      opacity: 0.7;
    }
    
    .next-btn {
      padding: 12px 30px;
      border-radius: 50px;
      background: var(--primary);
      color: white;
      border: none;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      gap: 8px;
      box-shadow: 0 4px 15px rgba(108, 99, 255, 0.3);
    }
    
    .next-btn:hover {
      background: var(--secondary);
      transform: translateY(-3px);
      box-shadow: 0 6px 20px rgba(108, 99, 255, 0.4);
    }
    
    .next-btn:disabled {
      background: #ccc;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }
    
    /* Results Modal */
    .results-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1000;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s;
    }
    
    .results-modal.show {
      opacity: 1;
      pointer-events: all;
    }
    
    .modal-content {
      background: white;
      border-radius: 16px;
      padding: 40px;
      max-width: 500px;
      width: 90%;
      text-align: center;
      transform: translateY(20px);
      transition: transform 0.3s;
      box-shadow: 0 20px 50px rgba(0,0,0,0.2);
      position: relative;
      overflow: hidden;
    }
    
    .modal-content::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 10px;
      background: linear-gradient(90deg, var(--primary), var(--accent));
    }
    
    .results-modal.show .modal-content {
      transform: translateY(0);
    }
    
    .modal-icon {
      font-size: 5rem;
      margin-bottom: 20px;
      background: linear-gradient(45deg, var(--primary), var(--accent));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }
    
    .modal-title {
      font-size: 2rem;
      margin-bottom: 15px;
      background: linear-gradient(45deg, var(--primary), var(--accent));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }
    
    .modal-text {
      margin-bottom: 25px;
      opacity: 0.8;
      font-size: 1.1rem;
    }
    
    .modal-rp {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--accent);
      margin: 20px 0;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }
    
    .modal-rp i {
      font-size: 1.8rem;
    }
    
    .modal-buttons {
      display: flex;
      gap: 15px;
      justify-content: center;
    }
    
    .modal-btn {
      padding: 12px 30px;
      border-radius: 50px;
      background: var(--primary);
      color: white;
      border: none;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .modal-btn:hover {
      background: var(--secondary);
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(108, 99, 255, 0.3);
    }
    
    .modal-btn.secondary {
      background: white;
      color: var(--primary);
      border: 2px solid var(--primary);
    }
    
    .modal-btn.secondary:hover {
      background: var(--primary);
      color: white;
    }
    
    /* Admin Panel */
    .admin-panel {
      background: white;
      border-radius: 16px;
      padding: 30px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.05);
      margin-bottom: 30px;
      animation: fadeIn 0.5s;
    }
    
    .admin-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 1px solid #eee;
    }
    
    .admin-title {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--primary);
    }
    
    .quiz-form {
      display: grid;
      grid-template-columns: 1fr;
      gap: 20px;
    }
    
    .form-group {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    
    .form-label {
      font-weight: 600;
      font-size: 0.9rem;
    }
    
    .form-input, .form-select, .form-textarea {
      padding: 12px 15px;
      border-radius: 8px;
      border: 2px solid #eee;
      font-size: 1rem;
      transition: all 0.3s;
    }
    
    .form-input:focus, .form-select:focus, .form-textarea:focus {
      border-color: var(--primary);
      outline: none;
      box-shadow: 0 0 0 3px rgba(108, 99, 255, 0.2);
    }
    
    .form-textarea {
      min-height: 100px;
      resize: vertical;
    }
    
    .option-item {
      display: flex;
      gap: 10px;
      align-items: center;
    }
    
    .option-item input {
      flex-grow: 1;
    }
    
    .option-item button {
      background: var(--danger);
      color: white;
      border: none;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s;
    }
    
    .option-item button:hover {
      background: #d32f2f;
    }
    
    .add-option-btn {
      background: var(--success);
      color: white;
      border: none;
      padding: 10px 15px;
      border-radius: 8px;
      display: flex;
      align-items: center;
      gap: 8px;
      cursor: pointer;
      transition: all 0.3s;
      margin-top: 10px;
    }
    
    .add-option-btn:hover {
      background: #388E3C;
    }
    
    .add-quiz-btn {
      background: var(--primary);
      color: white;
      border: none;
      padding: 15px 25px;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      gap: 10px;
      justify-content: center;
    }
    
    .add-quiz-btn:hover {
      background: var(--secondary);
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(108, 99, 255, 0.3);
    }
    
    /* Quiz List */
    .quiz-list {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 20px;
      margin-top: 30px;
    }
    
    .quiz-card {
      background: white;
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 0 5px 15px rgba(0,0,0,0.05);
      transition: all 0.3s;
    }
    
    .quiz-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 25px rgba(0,0,0,0.1);
    }
    
    .quiz-card-header {
      padding: 20px;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: white;
    }
    
    .quiz-card-title {
      font-size: 1.2rem;
      font-weight: 600;
      margin-bottom: 5px;
    }
    
    .quiz-card-meta {
      display: flex;
      justify-content: space-between;
      font-size: 0.8rem;
      opacity: 0.8;
    }
    
    .quiz-card-body {
      padding: 20px;
    }
    
    .quiz-card-stats {
      display: flex;
      justify-content: space-between;
      margin-bottom: 15px;
      font-size: 0.9rem;
    }
    
    .quiz-card-actions {
      display: flex;
      gap: 10px;
    }
    
    .quiz-card-btn {
      flex-grow: 1;
      padding: 10px;
      border-radius: 8px;
      border: none;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 5px;
    }
    
    .quiz-card-btn.edit {
      background: var(--info);
      color: white;
    }
    
    .quiz-card-btn.delete {
      background: var(--danger);
      color: white;
    }
    
    .quiz-card-btn:hover {
      opacity: 0.9;
      transform: translateY(-2px);
    }
    
    /* Tabs */
    .tabs {
      display: flex;
      border-bottom: 1px solid #eee;
      margin-bottom: 20px;
    }
    
    .tab {
      padding: 10px 20px;
      cursor: pointer;
      font-weight: 600;
      color: var(--dark);
      opacity: 0.7;
      transition: all 0.3s;
      border-bottom: 3px solid transparent;
    }
    
    .tab.active {
      opacity: 1;
      color: var(--primary);
      border-bottom-color: var(--primary);
    }
    
    .tab-content {
      display: none;
    }
    
    .tab-content.active {
      display: block;
    }
    
    /* Animations */
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    @keyframes fadeInDown {
      from {
        opacity: 0;
        transform: translateY(-20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }
    
    /* Responsive */
    @media (max-width: 768px) {
      .header-container {
        flex-direction: column;
        gap: 15px;
      }
      
      .nav-links {
        width: 100%;
        justify-content: space-around;
      }
      
      .rp-dashboard {
        flex-direction: column;
        gap: 20px;
        align-items: flex-start;
      }
      
      .rp-progress {
        width: 100%;
        max-width: none;
      }
      
      .quiz-question {
        font-size: 1.1rem;
      }
      
      .modal-buttons {
        flex-direction: column;
      }
      
      .modal-btn {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="header-container">
      <a href="index.html" class="logo">
        <div class="logo-icon">
          <i class="fas fa-graduation-cap"></i>
        </div>
        <div class="logo-text">EduSyncHub</div>
      </a>
      <nav class="nav-links">
        <a href="index.html" class="nav-link">
          <i class="fas fa-home"></i> Home
        </a>
        <a href="quiz.html" class="nav-link active">
          <i class="fas fa-gamepad"></i> Quiz
        </a>
        <a href="leaderboard.html" class="nav-link">
          <i class="fas fa-trophy"></i> Leaderboard
        </a>
        <a href="admin.html" class="nav-link">
          <i class="fas fa-user-shield"></i> Admin
        </a>
        
      </nav>
    </div>
  </header>

  <!-- Main Content -->
  <main class="container">
    <!-- RP Dashboard -->
    <div class="rp-dashboard">
      <div class="rp-info">
        <div class="rp-icon">
          <i class="fas fa-coins"></i>
        </div>
        <div>
          <div class="rp-amount" id="rpAmount">0</div>
          <div class="rp-label">Reward Points</div>
        </div>
      </div>
      <div class="rp-progress">
        <div class="progress-bar">
          <div class="progress-fill" id="rpProgress"></div>
        </div>
        <div class="progress-text" id="rpProgressText">Level 1 (0/100)</div>
      </div>
    </div>
    
    <!-- Tabs -->
    <div class="tabs">
      <div class="tab active" data-tab="play">Play Quiz</div>
      <div class="tab" data-tab="admin">Admin Panel</div>
    </div>
    
    <!-- Play Quiz Tab -->
    <div class="tab-content active" id="play-tab">
      <!-- Quiz Container -->
      <div class="quiz-container">
        <div class="quiz-header">
          <div>
            <span class="quiz-category category-math" id="quizCategory">Mathematics</span>
            <span class="quiz-difficulty" id="quizDifficulty">Medium Difficulty</span>
          </div>
          <div class="quiz-rp" id="quizRP">+10 RP</div>
        </div>
        
        <div class="quiz-question" id="quizQuestion">
          Loading question...
        </div>
        
        <div class="options-container" id="optionsContainer">
          <!-- Options will be inserted here by JavaScript -->
        </div>
        
        <div class="quiz-footer">
          <div class="question-counter" id="questionCounter">Question 1 of 5</div>
          <button class="next-btn" id="nextBtn" disabled>
            <span>Next Question</span>
            <i class="fas fa-arrow-right"></i>
          </button>
        </div>
      </div>
    </div>
    
    <!-- Admin Panel Tab -->
    <div class="tab-content" id="admin-tab">
      <div class="admin-panel">
        <div class="admin-header">
          <h2 class="admin-title">Create New Quiz</h2>
        </div>
        
        <form class="quiz-form" id="quizForm">
          <div class="form-group">
            <label class="form-label">Question</label>
            <textarea class="form-textarea" id="quizQuestionInput" required></textarea>
          </div>
          
          <div class="form-group">
            <label class="form-label">Category</label>
            <select class="form-select" id="quizCategoryInput" required>
              <option value="math">Mathematics</option>
              <option value="science">Science</option>
              <option value="ict">ICT</option>
            </select>
          </div>
          
          <div class="form-group">
            <label class="form-label">Difficulty</label>
            <select class="form-select" id="quizDifficultyInput" required>
              <option value="easy">Easy</option>
              <option value="medium">Medium</option>
              <option value="hard">Hard</option>
            </select>
          </div>
          
          <div class="form-group">
            <label class="form-label">Options (Mark the correct answer)</label>
            <div id="quizOptionsContainer">
              <div class="option-item">
                <input type="text" class="form-input" placeholder="Option 1" required>
                <input type="radio" name="correctOption" value="0" required>
              </div>
              <div class="option-item">
                <input type="text" class="form-input" placeholder="Option 2" required>
                <input type="radio" name="correctOption" value="1" required>
              </div>
            </div>
            <button type="button" class="add-option-btn" id="addOptionBtn">
              <i class="fas fa-plus"></i> Add Option
            </button>
          </div>
          
          <div class="form-group">
            <label class="form-label">Image URL (Optional)</label>
            <input type="url" class="form-input" id="quizImageInput" placeholder="https://example.com/image.jpg">
          </div>
          
          <button type="submit" class="add-quiz-btn">
            <i class="fas fa-plus"></i> Add Quiz
          </button>
        </form>
      </div>
      
      <h2 class="admin-title">Existing Quizzes</h2>
      <div class="quiz-list" id="quizList">
        <!-- Quizzes will be loaded here -->
      </div>
    </div>
  </main>
  
  <!-- Results Modal -->
  <div class="results-modal" id="resultsModal">
    <div class="modal-content">
      <div class="modal-icon">
        <i class="fas fa-trophy" id="modalIcon"></i>
      </div>
      <h2 class="modal-title" id="modalTitle">Quiz Completed!</h2>
      <p class="modal-text" id="modalText">You answered 4 out of 5 questions correctly.</p>
      <div class="modal-rp">
        <i class="fas fa-coins"></i>
        <span id="modalRP">+50 RP Earned!</span>
      </div>
      <div class="modal-buttons">
        <button class="modal-btn" id="modalBtn">
          <i class="fas fa-redo"></i> Play Again
        </button>
        <button class="modal-btn secondary" id="modalLeaderboardBtn">
          <i class="fas fa-trophy"></i> View Leaderboard
        </button>
      </div>
    </div>
  </div>
  
  <script>
    // Quiz Data
    let quizData = JSON.parse(localStorage.getItem('quizData')) || {
      math: [
        {
          question: "What is the value of π (pi) rounded to two decimal places?",
          options: ["3.14", "3.16", "3.18", "3.12"],
          answer: 0,
          difficulty: "easy",
          image: null
        },
        {
          question: "Solve for x: 2x + 5 = 15",
          options: ["5", "10", "7.5", "20"],
          answer: 0,
          difficulty: "easy",
          image: null
        },
        {
          question: "What is the area of a triangle with base 6cm and height 4cm?",
          options: ["10cm²", "12cm²", "24cm²", "18cm²"],
          answer: 1,
          difficulty: "medium",
          image: null
        },
        {
          question: "If a right triangle has legs of 3cm and 4cm, what is the length of the hypotenuse?",
          options: ["5cm", "7cm", "6cm", "12cm"],
          answer: 0,
          difficulty: "medium",
          image: null
        },
        {
          question: "What is the derivative of x³ with respect to x?",
          options: ["3x²", "x²", "3x", "x⁴/4"],
          answer: 0,
          difficulty: "hard",
          image: null
        }
      ],
      science: [
        {
          question: "Which planet is known as the Red Planet?",
          options: ["Venus", "Mars", "Jupiter", "Saturn"],
          answer: 1,
          difficulty: "easy",
          image: null
        },
        {
          question: "What is the chemical symbol for gold?",
          options: ["Go", "Gd", "Au", "Ag"],
          answer: 2,
          difficulty: "easy",
          image: null
        },
        {
          question: "Which gas do plants absorb from the atmosphere during photosynthesis?",
          options: ["Oxygen", "Nitrogen", "Carbon Dioxide", "Hydrogen"],
          answer: 2,
          difficulty: "medium",
          image: null
        },
        {
          question: "What is the powerhouse of the cell?",
          options: ["Nucleus", "Mitochondria", "Ribosome", "Endoplasmic Reticulum"],
          answer: 1,
          difficulty: "medium",
          image: null
        },
        {
          question: "Which scientist proposed the theory of relativity?",
          options: ["Isaac Newton", "Albert Einstein", "Galileo Galilei", "Stephen Hawking"],
          answer: 1,
          difficulty: "hard",
          image: null
        }
      ],
      ict: [
        {
          question: "What does HTML stand for?",
          options: [
            "Hyper Text Markup Language",
            "High Tech Modern Language",
            "Hyperlinks and Text Markup Language",
            "Home Tool Markup Language"
          ],
          answer: 0,
          difficulty: "easy",
          image: null
        },
        {
          question: "Which programming language is known as the 'language of the web'?",
          options: ["Python", "Java", "JavaScript", "C++"],
          answer: 2,
          difficulty: "easy",
          image: null
        },
        {
          question: "What is the binary representation of the decimal number 10?",
          options: ["1010", "1001", "1100", "1111"],
          answer: 0,
          difficulty: "medium",
          image: null
        },
        {
          question: "Which protocol is used to send email?",
          options: ["FTP", "HTTP", "SMTP", "SSH"],
          answer: 2,
          difficulty: "medium",
          image: null
        },
        {
          question: "What does API stand for in programming?",
          options: [
            "Automated Programming Interface",
            "Application Programming Interface",
            "Advanced Program Interaction",
            "Application Process Integration"
          ],
          answer: 1,
          difficulty: "hard",
          image: null
        }
      ]
    };

    // Game State
    let currentQuiz = [];
    let currentQuestion = 0;
    let score = 0;
    let selectedOption = null;
    let rewardPoints = parseInt(localStorage.getItem('rewardPoints')) || 0;
    let quizCount = parseInt(localStorage.getItem('quizCount')) || 0;
    
    // DOM Elements
    const rpAmount = document.getElementById('rpAmount');
    const rpProgress = document.getElementById('rpProgress');
    const rpProgressText = document.getElementById('rpProgressText');
    const quizCategory = document.getElementById('quizCategory');
    const quizDifficulty = document.getElementById('quizDifficulty');
    const quizRP = document.getElementById('quizRP');
    const quizQuestion = document.getElementById('quizQuestion');
    const optionsContainer = document.getElementById('optionsContainer');
    const questionCounter = document.getElementById('questionCounter');
    const nextBtn = document.getElementById('nextBtn');
    const resultsModal = document.getElementById('resultsModal');
    const modalTitle = document.getElementById('modalTitle');
    const modalText = document.getElementById('modalText');
    const modalRP = document.getElementById('modalRP');
    const modalBtn = document.getElementById('modalBtn');
    const modalLeaderboardBtn = document.getElementById('modalLeaderboardBtn');
    const modalIcon = document.getElementById('modalIcon');
    const tabs = document.querySelectorAll('.tab');
    const tabContents = document.querySelectorAll('.tab-content');
    const quizForm = document.getElementById('quizForm');
    const quizQuestionInput = document.getElementById('quizQuestionInput');
    const quizCategoryInput = document.getElementById('quizCategoryInput');
    const quizDifficultyInput = document.getElementById('quizDifficultyInput');
    const quizOptionsContainer = document.getElementById('quizOptionsContainer');
    const addOptionBtn = document.getElementById('addOptionBtn');
    const quizImageInput = document.getElementById('quizImageInput');
    const quizList = document.getElementById('quizList');
    
    // Initialize the game
    function init() {
      updateRPDisplay();
      startNewQuiz();
      loadQuizList();
      setupEventListeners();
    }
    
    // Setup event listeners
    function setupEventListeners() {
      // Tab switching
      tabs.forEach(tab => {
        tab.addEventListener('click', () => {
          tabs.forEach(t => t.classList.remove('active'));
          tabContents.forEach(c => c.classList.remove('active'));
          
          tab.classList.add('active');
          document.getElementById(`${tab.dataset.tab}-tab`).classList.add('active');
        });
      });
      
      // Quiz navigation
      nextBtn.addEventListener('click', nextQuestion);
      
      // Results modal
      modalBtn.addEventListener('click', () => {
        resultsModal.classList.remove('show');
        startNewQuiz();
      });
      
      modalLeaderboardBtn.addEventListener('click', () => {
        window.location.href = 'leaderboard.html';
      });
      
      // Admin form
      addOptionBtn.addEventListener('click', addOptionField);
      quizForm.addEventListener('submit', handleQuizSubmit);
    }
    
    // Start a new random quiz
    function startNewQuiz() {
      // Reset quiz state
      currentQuestion = 0;
      score = 0;
      selectedOption = null;
      
      // Select random category
      const categories = ['math', 'science', 'ict'];
      const randomCategory = categories[Math.floor(Math.random() * categories.length)];
      
      // Get 5 random questions from the category
      currentQuiz = [...quizData[randomCategory]].sort(() => 0.5 - Math.random()).slice(0, 5);
      
      // Set category display
      quizCategory.textContent = getCategoryName(randomCategory);
      quizCategory.className = 'quiz-category ' + getCategoryClass(randomCategory);
      
      // Load first question
      loadQuestion();
    }
    
    // Load a question into the UI
    function loadQuestion() {
      const question = currentQuiz[currentQuestion];
      
      // Set question text
      quizQuestion.textContent = question.question;
      
            // Set difficulty and RP value
      const difficultyRP = {
        easy: 10,
        medium: 15,
        hard: 20
      };
      
      quizDifficulty.textContent = `${question.difficulty.charAt(0).toUpperCase() + question.difficulty.slice(1)} Difficulty`;
      quizRP.textContent = `+${difficultyRP[question.difficulty]} RP`;
      
      // Display image if available
      if (question.image) {
        const img = document.createElement('img');
        img.src = question.image;
        img.className = 'quiz-image';
        quizQuestion.insertAdjacentElement('afterend', img);
      }
      
      // Clear previous options
      optionsContainer.innerHTML = '';
      
      // Create and append options
      question.options.forEach((option, index) => {
        const btn = document.createElement('button');
        btn.className = 'option-btn';
        btn.textContent = option;
        btn.dataset.index = index;
        btn.addEventListener('click', () => selectOption(index));
        optionsContainer.appendChild(btn);
      });
      
      // Update question counter
      questionCounter.textContent = `Question ${currentQuestion + 1} of ${currentQuiz.length}`;
      
      // Reset next button
      nextBtn.disabled = true;
      selectedOption = null;
      
      // Remove any previous image if not needed
      const existingImg = quizQuestion.parentElement.querySelector('.quiz-image');
      if (existingImg && !question.image) {
        existingImg.remove();
      }
    }
    
    // Handle option selection
    function selectOption(index) {
      const buttons = optionsContainer.querySelectorAll('.option-btn');
      buttons.forEach(btn => {
        btn.classList.add('disabled');
        if (parseInt(btn.dataset.index) === currentQuiz[currentQuestion].answer) {
          btn.classList.add('correct');
        } else if (parseInt(btn.dataset.index) === index) {
          btn.classList.add('incorrect');
        }
      });
      
      selectedOption = index;
      nextBtn.disabled = false;
      
      // Update score if correct
      if (index === currentQuiz[currentQuestion].answer) {
        score++;
        const rpEarned = {
          easy: 10,
          medium: 15,
          hard: 20
        }[currentQuiz[currentQuestion].difficulty];
        rewardPoints += rpEarned;
        updateRPDisplay();
      }
    }
    
    // Move to next question or show results
    function nextQuestion() {
      currentQuestion++;
      if (currentQuestion < currentQuiz.length) {
        loadQuestion();
      } else {
        showResults();
      }
    }
    
    // Update Reward Points display
    function updateRPDisplay() {
      rpAmount.textContent = rewardPoints;
      const level = Math.floor(rewardPoints / 100) + 1;
      const progress = (rewardPoints % 100);
      rpProgress.style.width = `${progress}%`;
      rpProgressText.textContent = `Level ${level} (${progress}/100)`;
      localStorage.setItem('rewardPoints', rewardPoints);
    }
    
    // Show quiz results
    function showResults() {
      modalTitle.textContent = 'Quiz Completed!';
      modalText.textContent = `You answered ${score} out of ${currentQuiz.length} questions correctly.`;
      modalRP.textContent = `+${score * 10} RP Earned!`;
      modalIcon.className = 'fas fa-trophy modal-icon';
      resultsModal.classList.add('show');
      
      // Update quiz count
      quizCount++;
      localStorage.setItem('quizCount', quizCount);
    }
    
    // Get category name
    function getCategoryName(category) {
      const names = {
        math: 'Mathematics',
        science: 'Science',
        ict: 'ICT'
      };
      return names[category] || category;
    }
    
    // Get category class
    function getCategoryClass(category) {
      return `category-${category}`;
    }
    
    // Add new option field in admin form
    function addOptionField() {
      const optionCount = quizOptionsContainer.children.length;
      if (optionCount >= 4) {
        alert('Maximum 4 options allowed');
        return;
      }
      
      const optionItem = document.createElement('div');
      optionItem.className = 'option-item';
      optionItem.innerHTML = `
        <input type="text" class="form-input" placeholder="Option ${optionCount + 1}" required>
        <input type="radio" name="correctOption" value="${optionCount}" required>
        <button type="button" class="remove-option-btn">
          <i class="fas fa-trash"></i>
        </button>
      `;
      quizOptionsContainer.appendChild(optionItem);
      
      // Add remove option event listener
      optionItem.querySelector('.remove-option-btn').addEventListener('click', () => {
        if (quizOptionsContainer.children.length > 2) {
          optionItem.remove();
        } else {
          alert('Minimum 2 options required');
        }
      });
    }
    
    // Handle quiz form submission
    function handleQuizSubmit(e) {
      e.preventDefault();
      
      const question = quizQuestionInput.value.trim();
      const category = quizCategoryInput.value;
      const difficulty = quizDifficultyInput.value;
      const image = quizImageInput.value.trim() || null;
      const options = Array.from(quizOptionsContainer.querySelectorAll('input[type="text"]')).map(input => input.value.trim());
      const correctOption = parseInt(quizOptionsContainer.querySelector('input[name="correctOption"]:checked').value);
      
      if (options.length < 2) {
        alert('At least 2 options are required');
        return;
      }
      
      if (options.some(opt => !opt)) {
        alert('All options must be filled');
        return;
      }
      
      const newQuiz = {
        question,
        options,
        answer: correctOption,
        difficulty,
        image
      };
      
      quizData[category].push(newQuiz);
      localStorage.setItem('quizData', JSON.stringify(quizData));
      
      quizForm.reset();
      quizOptionsContainer.innerHTML = `
        <div class="option-item">
          <input type="text" class="form-input" placeholder="Option 1" required>
          <input type="radio" name="correctOption" value="0" required>
        </div>
        <div class="option-item">
          <input type="text" class="form-input" placeholder="Option 2" required>
          <input type="radio" name="correctOption" value="1" required>
        </div>
      `;
      
      loadQuizList();
      alert('Quiz added successfully!');
    }
    
    // Load existing quizzes in admin panel
    function loadQuizList() {
      quizList.innerHTML = '';
      
      Object.keys(quizData).forEach(category => {
        quizData[category].forEach((quiz, index) => {
          const quizCard = document.createElement('div');
          quizCard.className = 'quiz-card';
          quizCard.innerHTML = `
            <div class="quiz-card-header">
              <div class="quiz-card-title">${quiz.question}</div>
              <div class="quiz-card-meta">
                <span>${getCategoryName(category)}</span>
                <span>${quiz.difficulty.charAt(0).toUpperCase() + quiz.difficulty.slice(1)}</span>
              </div>
            </div>
            <div class="quiz-card-body">
              <div class="quiz-card-stats">
                <span>Options: ${quiz.options.length}</span>
                <span>Correct: ${quiz.options[quiz.answer]}</span>
              </div>
              <div class="quiz-card-actions">
                <button class="quiz-card-btn edit" data-category="${category}" data-index="${index}">
                  <i class="fas fa-edit"></i> Edit
                </button>
                <button class="quiz-card-btn delete" data-category="${category}" data-index="${index}">
                  <i class="fas fa-trash"></i> Delete
                </button>
              </div>
            </div>
          `;
          quizList.appendChild(quizCard);
        });
      });
      
      // Add event listeners for edit and delete buttons
      quizList.querySelectorAll('.quiz-card-btn.edit').forEach(btn => {
        btn.addEventListener('click', () => editQuiz(btn.dataset.category, btn.dataset.index));
      });
      
      quizList.querySelectorAll('.quiz-card-btn.delete').forEach(btn => {
        btn.addEventListener('click', () => deleteQuiz(btn.dataset.category, btn.dataset.index));
      });
    }
    
    // Edit existing quiz
    function editQuiz(category, index) {
      const quiz = quizData[category][index];
      
      quizQuestionInput.value = quiz.question;
      quizCategoryInput.value = category;
      quizDifficultyInput.value = quiz.difficulty;
      quizImageInput.value = quiz.image || '';
      
      quizOptionsContainer.innerHTML = '';
      quiz.options.forEach((option, i) => {
        const optionItem = document.createElement('div');
        optionItem.className = 'option-item';
        optionItem.innerHTML = `
          <input type="text" class="form-input" value="${option}" placeholder="Option ${i + 1}" required>
          <input type="radio" name="correctOption" value="${i}" ${i === quiz.answer ? 'checked' : ''} required>
          <button type="button" class="remove-option-btn">
            <i class="fas fa-trash"></i>
          </button>
        `;
        quizOptionsContainer.appendChild(optionItem);
      });
      
      // Update form submission to edit instead of add
      quizForm.onsubmit = (e) => {
        e.preventDefault();
        const updatedQuiz = {
          question: quizQuestionInput.value.trim(),
          options: Array.from(quizOptionsContainer.querySelectorAll('input[type="text"]')).map(input => input.value.trim()),
          answer: parseInt(quizOptionsContainer.querySelector('input[name="correctOption"]:checked').value),
          difficulty: quizDifficultyInput.value,
          image: quizImageInput.value.trim() || null
        };
        
        quizData[category][index] = updatedQuiz;
        localStorage.setItem('quizData', JSON.stringify(quizData));
        
        quizForm.reset();
        quizForm.onsubmit = handleQuizSubmit;
        quizOptionsContainer.innerHTML = `
          <div class="option-item">
            <input type="text" class="form-input" placeholder="Option 1" required>
            <input type="radio" name="correctOption" value="0" required>
          </div>
          <div class="option-item">
            <input type="text" class="form-input" placeholder="Option 2" required>
            <input type="radio" name="correctOption" value="1" required>
          </div>
        `;
        loadQuizList();
        alert('Quiz updated successfully!');
      };
      
      // Add remove option event listeners
      quizOptionsContainer.querySelectorAll('.remove-option-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          if (quizOptionsContainer.children.length > 2) {
            btn.parentElement.remove();
          } else {
            alert('Minimum 2 options required');
          }
        });
      });
    }
    
    // Delete quiz
    function deleteQuiz(category, index) {
      if (confirm('Are you sure you want to delete this quiz?')) {
        quizData[category].splice(index, 1);
        localStorage.setItem('quizData', JSON.stringify(quizData));
        loadQuizList();
        alert('Quiz deleted successfully!');
      }
    }
    
    // Initialize the application
    init();
  </script>
</body>
</html>